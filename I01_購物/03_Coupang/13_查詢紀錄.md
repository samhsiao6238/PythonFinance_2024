# æŸ¥è©¢ç´€éŒ„

_å¾è³‡æ–™åº«æå– `æ­·å²æœå°‹é—œéµå­—` å°±æ˜¯åˆ—å‡º `coupang_products` è³‡æ–™è¡¨ä¸­å‡ºç¾éçš„ `search_keyword` å€¼ï¼Œä¸¦å»é™¤é‡è¤‡ã€ä¾ç…§ç­†æ•¸æ’åº_

## èªªæ˜

1. æŸ¥è©¢ç¨‹å¼ç¢¼ã€‚

```python
# å°å…¥åº«
import os
import pymysql
from dotenv import load_dotenv
from collections import Counter

# è¼‰å…¥ç’°å¢ƒè®Šæ•¸
load_dotenv()

# è³‡æ–™åº«è¨­å®š
DB_CONFIG = {
    "host": os.getenv("DB_HOST"),
    "port": int(os.getenv("DB_PORT", 3306)),
    "user": os.getenv("DB_USER"),
    "password": os.getenv("DB_PASSWORD"),
    "database": os.getenv("DB_NAME")
}

# SQLï¼šæŸ¥è©¢æ‰€æœ‰é—œéµå­—
sql = """
    SELECT search_keyword
    FROM coupang_products
"""

# å»ºç«‹é€£ç·šä¸¦æŸ¥è©¢
connection = pymysql.connect(
    host=DB_CONFIG["host"],
    port=DB_CONFIG["port"],
    user=DB_CONFIG["user"],
    password=DB_CONFIG["password"],
    database=DB_CONFIG["database"],
    charset="utf8mb4",
    cursorclass=pymysql.cursors.DictCursor
)

with connection:
    with connection.cursor() as cursor:
        cursor.execute(sql)
        rows = cursor.fetchall()

# çµ±è¨ˆå‡ºç¾æ¬¡æ•¸ä¸¦å»é‡æ’åº
keyword_list = [row["search_keyword"] for row in rows if row["search_keyword"]]
counter = Counter(keyword_list)
sorted_keywords = sorted(counter.items(), key=lambda x: x[1], reverse=True)

# è¼¸å‡ºå…¨éƒ¨çµæœ
# è‹¥åªé¡¯ç¤ºå‰ 10 å
# for keyword, count in sorted_keywords[:10]:
print("ğŸ” æ›¾ç¶“æœå°‹éçš„é—œéµå­—ï¼Œä¾ç…§å‡ºç¾æ¬¡æ•¸æ’åºï¼š")
for keyword, count in sorted_keywords:
    print(f"ğŸ”¹ {keyword}ï¼ˆ{count} ç­†ï¼‰")
```

2. å¦‚æœä¸çµ±è¨ˆå‡ºç¾æ¬¡æ•¸ï¼Œå¯åŠ å…¥èªå¥ `distinct` é€²è¡ŒæŸ¥è©¢ï¼Œé€™æ˜¯ SQL ä¸­ç”¨ä¾†æ’é™¤é‡è¤‡é …ç›®çš„èªå¥ã€‚

```sql
SELECT DISTINCT search_keyword FROM coupang_products ORDER BY search_keyword
```

## ç›¸é—œå…ƒç´ èªªæ˜

1. `SELECT search_keyword`ï¼šå¾è¡¨ä¸­å–å‡ºæ‰€æœ‰é—œéµå­—ç´€éŒ„ã€‚

2. `Counter(keyword_list)`ï¼šçµ±è¨ˆæ¯å€‹é—œéµå­—å‡ºç¾å¹¾æ¬¡ã€‚

3. `sorted(..., reverse=True)`ï¼šæ ¹æ“šç­†æ•¸ç”±é«˜åˆ°ä½æ’åºã€‚

4. `row["search_keyword"]`ï¼šé¿å… NULL å€¼å‡ºç¾é€ æˆéŒ¯èª¤ã€‚

