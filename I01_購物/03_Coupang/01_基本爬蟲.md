# Coupang

<br>

## èªªæ˜

1. ä»¥é—œéµå­—çˆ¬å–è³‡æ–™ï¼Œä¸¦æä¾›é€²éšç¯©é¸çš„é—œéµå­—å¾å–å›çš„è³‡æ–™ä¸­é€²ä¸€æ­¥æå–è³‡è¨Šï¼›ç‰¹åˆ¥èªªæ˜ï¼Œé€™æ¨£çš„éç¨‹æœƒéœ€è¦å…©å€‹æ­¥é©Ÿï¼Œé¦–å…ˆç¢ºèª `é—œéµå­—` å¯å–å›æ‰€éœ€è³‡è¨Šï¼Œç„¶å¾Œåœ¨çµæœä¸­æå– `é€²éšæœå°‹é—œéµå­—` ä»¥å¾—åˆ°æœ€çµ‚çµæœï¼Œå‡å¦‚é€²éšæœå°‹ç¯„åœé‚„æ˜¯éå¤§ï¼Œå¯ä»¥æ·»åŠ é€²éšæœå°‹æ¢ä»¶ã€‚

    ```python
    from selenium import webdriver
    from selenium.webdriver.chrome.service import Service
    from webdriver_manager.chrome import ChromeDriverManager
    from selenium.webdriver.chrome.options import Options
    from bs4 import BeautifulSoup
    from urllib.parse import quote
    import time

    def get_coupang_search_results(search_keyword: str, advanced_keywords: list[str]):
        encoded_keyword = quote(search_keyword)
        url = f"https://www.tw.coupang.com/search?q={encoded_keyword}&channel=user"

        options = Options()
        # è‹¥éœ€éš±è—ç€è¦½å™¨å¯å•Ÿç”¨
        options.add_argument("--headless=new")
        options.add_argument("--disable-gpu")
        options.add_argument("--no-sandbox")
        options.add_argument("--lang=zh-TW")

        driver = webdriver.Chrome(
            service=Service(
                ChromeDriverManager().install()),
                options=options
        )
        driver.get(url)
        time.sleep(5)

        html = driver.page_source
        # è‹¥éœ€é‡è¤‡æ“ä½œç€è¦½å™¨å¯å…ˆä¿ç•™ä¸é—œé–‰
        driver.quit()

        soup = BeautifulSoup(html, "html.parser")
        product_cards = soup.select(
            "div.SearchResult_searchResultProduct___h6E9"
        )

        results = []
        matched_results = []

        for card in product_cards:
            try:
                # å®Œæ•´å…§å®¹æ–‡å­—
                full_text = card.get_text(separator=" ", strip=True)

                # ç²¾ç°¡æ¨™é¡Œï¼ˆåƒ…å– title å€å¡Šï¼‰
                title_tag = card.select_one("div.Product_title__8K0xk")
                title = title_tag.get_text(strip=True) if title_tag else "N/A"

                # åƒ¹æ ¼
                price_tag = card.select_one("span.Product_salePricePrice__2FbsL span")
                price = price_tag.get_text(strip=True) if price_tag else "N/A"

                # æ¯å–®ä½åƒ¹æ ¼
                unit_price_tag = card.select_one("div.Product_unitPrice__QQPdR")
                unit_price = unit_price_tag.get_text(strip=True) if unit_price_tag else "N/A"

                product = {
                    "title": title,
                    "full_text": full_text,
                    "price": price,
                    "unit_price": unit_price
                }

                results.append(product)

                # é€²éšæ¢ä»¶ï¼šå¾å®Œæ•´æè¿°ä¸­éæ¿¾
                if all(kw in full_text for kw in advanced_keywords):
                    matched_results.append(product)

            except Exception as e:
                print("è§£æéŒ¯èª¤ï¼š", e)
                continue

        return results, matched_results

    # ä¸»ç¨‹å¼å€å¡Š
    if __name__ == "__main__":
        # æœå°‹ä¸»é—œéµå­—
        search_keyword = "DORO CAT è±†ä¹³è²“"

        # é€²éšç¯©é¸æ¢ä»¶ï¼ˆéœ€åŒæ™‚åŒ…å«å…¨éƒ¨é—œéµè©ï¼‰
        advanced_keywords = ["æ··åˆè±†è…èˆ‡ç¤¦ç‰©è²“ç ‚", "6è¢‹"]

        # åŸ·è¡Œçˆ¬å–
        all_products, filtered_products = get_coupang_search_results(
            search_keyword,
            advanced_keywords
        )

        print(f"æœå°‹é—œéµå­—ï¼š{search_keyword}")
        print("æ‰€æœ‰æœå°‹çµæœï¼š")
        for idx, product in enumerate(all_products, 1):
            print(f"{idx}. æ¨™é¡Œ: {product['title']}")
            print(f"   åƒ¹æ ¼: {product['price']}")
            print(f"   æ¯å–®ä½: {product['unit_price']}")
            print(f"   å®Œæ•´å…§å®¹: {product['full_text']}")
            print("-" * 60)

        print(f"\nğŸ” é€²éšæ¢ä»¶ç¬¦åˆé …ç›®ï¼ˆåŒ…å«ï¼š{'ã€'.join(advanced_keywords)}ï¼‰ï¼š")
        for idx, product in enumerate(filtered_products, 1):
            print(f"{idx}. æ¨™é¡Œ: {product['title']}")
            print(f"   åƒ¹æ ¼: {product['price']}")
            print(f"   æ¯å–®ä½: {product['unit_price']}")
            print(f"   å®Œæ•´å…§å®¹: {product['full_text']}")
            print("-" * 60)
    ```

<br>

2. ä»¥ä¸Šçš„çµæœåœ¨é€²éšæœå°‹éƒ¨åˆ†æœƒå¾—åˆ°ã€‚

    ```bash
    é€²éšæ¢ä»¶ç¬¦åˆé …ç›®ï¼ˆåŒ…å«ï¼šæ··åˆè±†è…èˆ‡ç¤¦ç‰©è²“ç ‚ï¼‰ï¼š
    1. æ¨™é¡Œ: DORO CAT è±†ä¹³è²“ æ··åˆè±†è…èˆ‡ç¤¦ç‰©è²“ç ‚, ç„¡å‘³, 7L, 6è¢‹
    åƒ¹æ ¼: $677
    æ¯å–®ä½: ($1.61/100ml)
    å®Œæ•´å…§å®¹: DORO CAT è±†ä¹³è²“ æ··åˆè±†è…èˆ‡ç¤¦ç‰©è²“ç ‚, ç„¡å‘³, 7L, 6è¢‹ ç‰¹åƒ¹ 64æŠ˜ $1,074 $677 ($1.61/100ml) 7æŠ˜ å„ªæƒ åˆ¸ æ˜å¤© 5/12 (ä¸€) é è¨ˆé€é” å…é‹ ( 65 )
    ------------------------------------------------------------
    2. æ¨™é¡Œ: DORO CAT è±†ä¹³è²“ æ··åˆè±†è…èˆ‡ç¤¦ç‰©è²“ç ‚, ç„¡å‘³, 7L, 1è¢‹
    åƒ¹æ ¼: $125
    æ¯å–®ä½: ($1.79/100ml)
    å®Œæ•´å…§å®¹: DORO CAT è±†ä¹³è²“ æ··åˆè±†è…èˆ‡ç¤¦ç‰©è²“ç ‚, ç„¡å‘³, 7L, 1è¢‹ ç‰¹åƒ¹ 5æŠ˜ $250 $125 ($1.79/100ml) 7æŠ˜ å„ªæƒ åˆ¸ æ˜å¤© 5/12 (ä¸€) é è¨ˆé€é” å…é‹ æ»¿ $490 ( 65 )
    ------------------------------------------------------------
    ```

<br>

3. å¯ä¾æ“šçµæœï¼Œå°‡é€²éšé—œéµå­—æ·»åŠ ä¸€çµ„ `6è¢‹`ã€‚

    ```python
    advanced_keywords = ["æ··åˆè±†è…èˆ‡ç¤¦ç‰©è²“ç ‚", "6è¢‹"]
    ```

<br>

4. æœƒé€²ä¸€æ­¥ç¯©é¸å¾—åˆ°æ›´ç´°ç·»çš„çµæœã€‚

    ```bash
    é€²éšæ¢ä»¶ç¬¦åˆé …ç›®ï¼ˆåŒ…å«ï¼šæ··åˆè±†è…èˆ‡ç¤¦ç‰©è²“ç ‚ã€6è¢‹ï¼‰ï¼š
    1. æ¨™é¡Œ: DORO CAT è±†ä¹³è²“ æ··åˆè±†è…èˆ‡ç¤¦ç‰©è²“ç ‚, ç„¡å‘³, 7L, 6è¢‹
    åƒ¹æ ¼: $677
    æ¯å–®ä½: ($1.61/100ml)
    å®Œæ•´å…§å®¹: DORO CAT è±†ä¹³è²“ æ··åˆè±†è…èˆ‡ç¤¦ç‰©è²“ç ‚, ç„¡å‘³, 7L, 6è¢‹ ç‰¹åƒ¹ 64æŠ˜ $1,074 $677 ($1.61/100ml) 7æŠ˜ å„ªæƒ åˆ¸ æ˜å¤© 5/12 (ä¸€) é è¨ˆé€é” å…é‹ ( 65 )
    ------------------------------------------------------------
    ```

<br>
