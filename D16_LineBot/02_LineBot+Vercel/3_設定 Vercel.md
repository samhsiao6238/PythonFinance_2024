# è¨­ç½® Vercel

<br>

## å®‰è£å¥—ä»¶

1. é€²å…¥ [å®˜ç¶²ç™»å…¥](https://vercel.com/login)ï¼Œé¸æ“‡ `Github` ç™»å…¥å³å¯ã€‚

    ![](images/img_132.png)

<br>

2. é»æ“Šå³ä¸Šæ–¹çš„ `Docs` æ–‡ä»¶æŸ¥çœ‹ç›¸é—œè¨­ç½®çš„èªªæ˜ã€‚

    ![](images/img_133.png)

<br>

3. é€²å…¥æ•™ç¨‹ã€‚

    ![](images/img_134.png)

<br>

4. ä½¿ç”¨ `npm` é€²è¡Œå®‰è£ã€‚

    ![](images/img_135.png)

<br>

5. è¨˜å¾—è¦åŠ ä¸Š `sudo`ï¼Œå¦å‰‡å®‰è£éç¨‹ä¸­æœƒå ±éŒ¯ã€‚

    ```bash
    sudo npm i -g vercel
    ```
<br>

## è£œå……èªªæ˜

_èªªæ˜å‰é¢æ­¥é©Ÿè¨­å®šçš„ `.env` æ–‡ä»¶_

<br>

1. åœ¨åšä»»ä½•çš„éƒ¨ç½²ä¹‹å‰ï¼Œéƒ½è¦ç¢ºä¿è…³æœ¬ä¸­çš„æ•æ„Ÿè³‡è¨Šæ˜¯å¦å¾—åˆ°ä¿è­·ï¼Œåœ¨å®˜æ–¹çš„è…³æœ¬ä¸­ï¼Œä¸¦æœªå°‡ `secret` ä»¥åŠ `token` é€²è¡Œä¿è­·ï¼Œé€™è£¡å±•ç¤ºé€é `dotenv` ä¾†éš±è—æ•æ„Ÿè³‡è¨Šã€‚

    ![](images/img_136.png)

<br>

2. å®‰è£å¥—ä»¶ã€‚

    ```bash
    pip install python-dotenv
    ```

<br>

3. åœ¨å°ˆæ¡ˆå…§æ ¹ç›®éŒ„è‡ªå»ºç«‹ä¸€æ ¼éš±è—æª”æ¡ˆ `.env` ä¸¦ç·¨è¼¯å…§å®¹ã€‚

    ```bash
    _CHANNEL_ACCESS_TOKEN_ = <è²¼ä¸Š TKOKEN>
    _CHANNEL_SECRET_ = <è²¼ä¸Š SECRET>
    ```

<br>

4. ç‰¹åˆ¥æ³¨æ„ï¼Œ `.env` æª”æ¡ˆå…§çš„å­—ä¸²ç„¡éœ€åŠ ä¸Šå¼•è™Ÿï¼Œèˆ‡ç­‰è™Ÿé–“æœ‰ç„¡é–“éš”çš†å¯ã€‚
    
    ![](images/img_137.png)

<br>

5. åœ¨æ ¹ç›®éŒ„æ·»åŠ  `.gitignore` æª”æ¡ˆï¼Œä¸¦å°‡ `.env` å¯«å…¥å…¶ä¸­ã€‚

    ![](images/img_138.png)

<br>

6. åœ¨ä¸»è…³æœ¬ `index.py` å°å…¥ dotenvã€‚

    ```python
    import os
    from dotenv import load_dotenv
    load_dotenv()
    ```

<br>

7. åœ¨ç¨‹åºä¸­ä½¿ç”¨ `os` ä¾†å–å¾— Token åŠ Secretã€‚

    _å–å¾—_
    ```python
    CHANNEL_ACCESS_TOKEN = os.getenv("_CHANNEL_ACCESS_TOKEN_")
    CHANNEL_SECRET = os.getenv("_CHANNEL_SECRET_")
    ```
    _ä½¿ç”¨_
    ```
    configuration = Configuration(access_token=CHANNEL_ACCESS_TOKEN)
    handler = WebhookHandler(CHANNEL_SECRET)
    ```

<br>

8. é‡æ–°é‹è¡Œä¸€æ¬¡è…³æœ¬ï¼Œç„¶å¾Œé€²è¡Œå°è©±æ¸¬è©¦ï¼Œç¢ºèªæ²’å•é¡Œï¼Œä¾¿å¯ä»¥é€²è¡Œä»¥ä¸‹æ­¥é©Ÿã€‚

    ![](images/img_139.png)

_ä»¥ä¸Šå®Œæˆæ•æ„Ÿè³‡è¨Šè™•ç†_

<br>

## é€²è¡Œè¨­å®šèˆ‡éƒ¨ç½²

_é€é Vercel CLI é€²è¡Œéƒ¨ç½²ï¼Œé€²å…¥æ ¹ç›®éŒ„ä¸­é–‹å•Ÿçµ‚ç«¯æ©Ÿï¼Œå‹™å¿…ç¢ºèªæ˜¯åœ¨æ ¹ç›®éŒ„_

<br>

1. é‹è¡Œ CLIï¼Œè¼¸å…¥ `Y`ã€‚

    ```bash
    sudo vercel
    ```

    ![](images/img_17.png)

<br>

2. åŸ·è¡Œå¾Œæœƒå‡ºç¾å°è©±ã€‚

    ![](images/img_140.png)

</br>

3. ä½¿ç”¨ `Github` é€²è¡Œç™»å…¥ã€‚

    ![](images/img_141.png)

<br>

4. æˆåŠŸç™»å…¥å¾Œæœƒé¡¯ç¤ºå¦‚ä¸‹ç•«é¢ï¼Œä¸æœƒè‡ªå‹•è¿”å›çµ‚ç«¯æ©Ÿï¼Œè¦æ‰‹å‹•åˆ‡æ›ã€‚

    ![](images/img_142.png)

<br>

5. è¡¨ç¤ºé€™å€‹å°ˆæ¡ˆè³‡æ–™å¤¾ä¸¦éæ˜¯ä¸€å€‹ `repo`ï¼Œè©¢å•æ˜¯å¦è¨­ç½®ä¸¦ä¸”éƒ¨ç½²ï¼š`Y`ã€‚

    ![](images/img_143.png)

<br>

6. é¸æ“‡ç•¶å‰çš„å°ˆæ¡ˆã€‚

    ![](images/img_144.png)

<br>

7. ä¸è¦é€£çµç¾æœ‰å°ˆæ¡ˆï¼šNã€‚

    ![](images/img_145.png)

<br>

8. å°ˆæ¡ˆåç¨±ï¼Œå¹¾å¦‚æœ‰æä¾›é è¨­å‰‡ä½¿ç”¨é è¨­å³å¯ï¼ˆENTERï¼‰ã€‚
    
    ![](images/img_146.png)

<br>

9. åœ¨å“ªå€‹ç›®éŒ„ï¼ˆENTERï¼‰ã€‚

    ![](images/img_147.png)

<br>

10. å‡å¦‚æ²’æœ‰æä¾›é è¨­åç¨±ï¼Œå‰‡æ‰‹å‹•è¼¸å…¥ã€‚

    ![](images/img_153.png)

</br>

11. å‡ºç¾éŒ¯èª¤ã€‚

    ![](images/img_151.png)

<br>

12. é€²å…¥ Vercel æ§åˆ¶å°ä¸­åœ¨å‰é¢æ­¥é©Ÿæ‰€å»ºç«‹çš„å°ˆæ¡ˆä¸­ï¼Œé»æ“Š `Settings`ã€‚

    ![](images/img_155.png) 

<br>

13. åœ¨ `General` é ç±¤ä¸­æ‰¾åˆ° `Node.js Version`ï¼Œæ‰‹å‹•åˆ‡æ›åˆ° `18.0`ã€‚

    ![](images/img_150.png)

<br>

14. åˆ‡æ›å¾Œè¨˜å¾—å„²å­˜ `Save`ã€‚

    ![](images/img_152.png)

<br>

15. å†æ¬¡é€é `sudo vercel` æŒ‡ä»¤é€²è¡Œè¨­å®šã€‚

    ![](images/img_54.png)

<br>

16. å®Œæˆå¾Œæœƒé¡¯ç¤ºé€²è¡Œéƒ¨ç½²çš„æç¤ºã€‚

    ![](images/img_154.png)

<br>

17. ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤é€²è¡Œéƒ¨ç½²ï¼Œåˆ‡è¨˜åŠ ä¸Š `sudo`ã€‚

    ```bash
    sudo vercel --prod
    ```

<br>

18. å®Œæˆéƒ¨ç½²ï¼Œè€Œè¨Šæ¯ä¸­é¡¯ç¤ºå› ç‚º `builds` å·²ç¶“å­˜åœ¨æ–¼è¨­ç½®æª”æ¡ˆä¸­ï¼Œæ‰€ä»¥è¨­ç½®æ²’æœ‰å¥—ç”¨ï¼Œé€™ä¸¦ä¸å½±éŸ¿éƒ¨ç½²çš„å®Œæˆã€‚

    ![](images/img_156.png)

<br>

19. å¦å¤–ä¾æ“šèªªæ˜ï¼Œé€™ä¸¦éä¸€å€‹ repoï¼Œé€™åœ¨ä¹‹å¾Œçš„æ­¥é©Ÿæœƒé€²è¡Œéƒ¨ç½²ï¼Œé€™è£¡æš«ä¸ç†æœƒã€‚

    ![](images/img_157.png)

</br>

## C. å‰å¾€ Vercel ä¸»æ§å°

1. åˆ° Vercel ä¸»æ§å°ï¼Œé»æ“Šå‰›å‰›ä¸Šå‚³çš„å°ˆæ¡ˆï¼Œé€™è£¡ç¤ºç¯„æ˜¯ `mybot`ï¼Œåç¨±æ˜¯éƒ¨ç½²çš„æ™‚å€™è‡ªå‹•å»ºç«‹çš„ã€‚

    ![](images/img_69.png)

</br>

2. å…ˆè¤‡è£½ Domainï¼Œå¯èƒ½æœƒæœ‰å…©å€‹ä»¥ä¸Šçš„ URLï¼Œä»»æ„è¤‡è£½ä¸€å€‹å³å¯ã€‚

    ![](images/img_70.png)

<br>

3. é€™å€‹æ™‚å€™ç¶²é æœƒé¡¯ç¤ºæœ‰éŒ¯èª¤ï¼Œä¸ç”¨ç†æœƒã€‚

    ![](images/img_158.png)

</br>

## D. å‰å¾€ Line Developers

1. å›åˆ° Line Developersï¼Œç·¨è¼¯æˆ–ä¿®æ”¹ Webhookã€‚

   ![](images/img_71.png)

</br>

2. è²¼ä¸Šç¶²å€ï¼ŒåŠ ä¸Šã€Œ/webhookã€ï¼Œç„¶å¾Œ Updateã€‚

   ![](images/img_72.png)

</br>

3. å†æ¬¡èªªæ˜é€™è£¡çš„ `webhook` å°¾ç¶´æ˜¯å®šç¾©åœ¨ `index.py` ä¸­çš„è·¯ç”± `route`ã€‚

   ![](images/img_73.png)

</br>

4. ç¢ºèª `Use webhook` æ˜¯é–‹å•Ÿã€‚

   ![](images/img_74.png)

</br>

5. é€™æ™‚é‚„æ²’å®Œæˆè¨­å®šï¼Œé»æ“Šé©—è­‰æœƒæ˜¯éŒ¯çš„ã€‚

   ![](images/img_76.png)

</br>

6. ç¹¼çºŒé€²è¡Œè¨­å®šï¼Œé»æ“Š Editã€‚

   ![](images/img_78.png)

</br>

7. é¸æ“‡æ¥å—é‚€è«‹ã€‚

   ![](images/img_79.png)

</br>

8. ç¸½çš„ä¾†èªªæ˜¯é€™æ¨£ã€‚

   ![](images/img_80.png)

</br>

_ğŸ”º ä»¥ä¸Šå®Œæˆç¬¬ä¸€éšæ®µçš„ Line Developers è¨­å®š_

</br>

## E. é€²å…¥ Vercel

1. æ¥è‘—é€²å…¥ Vercel çš„è¨­å®š `Settings`ã€‚

   ![](images/img_81.png)

</br>

2. é»æ“Šå·¦å´ç’°å¢ƒè®Šæ•¸ã€‚

   ![](images/img_82.png)

</br>

3. è¤‡è£½ç¨‹å¼ç¢¼ä¸­çš„å…©å€‹ç’°å¢ƒè®Šæ•¸åç¨±ä½œç‚º Keyã€‚

    ![](images/img_83.png)

</br>

4. å…ˆè²¼ä¸Š Keyã€‚

    ![](images/img_84.png)

<br>

5. å†è²¼ä¸Š Line Develop æ‰€æä¾›å°æ‡‰çš„ `Token` èˆ‡ `Secret` çš„å€¼ã€‚

    ![](images/img_159.png)

</br>

6. å‹™å¿…è¨˜å¾—å„²å­˜ã€‚

   ![](images/img_85.png)

7. å„²å­˜å¾Œæœƒé¡¯ç¤ºåœ¨ `Settings` çš„æœ€ä¸‹æ–¹ã€‚

    ![](images/img_160.png)

</br>

## F. é€²å…¥ VSCode

1. å°‡å°ˆæ¡ˆç™¼ä½ˆåˆ°æ–°çš„å„²å­˜åº«ä¸­ã€‚

   ![](images/img_86.png)

</br>

2. é¸å…¬é–‹ã€‚

   ![](images/img_87.png)

</br>

3. å®Œæˆéƒ¨ç½²åœ¨ Github ä¸ŠæŸ¥çœ‹ã€‚

    ![](images/img_161.png)

<br>

## G. å†å›åˆ° Vercel ä¸­

1. é»æ“Šé€£çµåˆ°å°ˆæ¡ˆã€‚

   ![](images/img_88.png)

</br>

2. é¸å– GitHubã€‚

   ![](images/img_89.png)

</br>

3. é€£çµå°æ‡‰çš„å°ˆæ¡ˆï¼Œåœ¨é€™è£¡æ˜¯ `mybot`ã€‚

    ![](images/img_90.png)

</br>

4. å›åˆ°ç”¢å“éƒ¨ç½² `Production Deployment` çš„ç•«é¢ï¼Œå¯ä»¥é»æ“Š `Source code` æŸ¥çœ‹å…§å®¹ä»¥ç¢ºèªæ˜¯å¦ç‚ºæ›´æ–°çš„å…§å®¹ã€‚

   ![](images/img_91.png)

</br>

## H. é©—è­‰çµæœ

1. Vercel çš„éƒ¨ç½²æœ‰æ™‚æœƒæœ‰å»¶é²ç‹€æ³ï¼Œå¯ä»¥é€éå»ä¿®æ”¹ä¸€ä¸‹ `index.py` ä¾†åŒæ­¥ä¸¦è§€å¯Ÿä¸€ä¸‹éƒ¨ç½²ç‹€æ³ã€‚

   ![](images/img_92.png)

</br>

2. ç›´åˆ°ç•«é¢æ­£å¸¸é¡¯ç¤ºå°±è¡¨ç¤ºéƒ¨ç½²å®Œæˆã€‚

   ![](images/img_93.png)

</br>

3. ä¹Ÿå¯ä»¥é€éé©—è­‰ Webhook ç¢ºèªæ˜¯å¦å®Œæˆéƒ¨ç½²ã€‚

   ![](images/img_94.png)

</br>

## I. å…¶ä»–è£œå……

    _ä»‹ç´¹å®Œä¼ºæœå™¨å¾Œï¼Œå†ä½¿ç”¨ `Ngrok` å°‡ LineBot éƒ¨ç½²åœ¨æ¨¹è“æ´¾ä¸Š_

</br>

---

_END:é€™è£¡åƒ…æ˜¯ç¢ºèªéƒ¨ç½²ï¼Œè‡³æ–¼è…³æœ¬å…§å®¹ä¸¦ç„¡å¤ªå¤šåŠŸèƒ½_