# 關於簽署

<br>

## 操作

1. 帳號列表。

    ```python
    print(api.list_accounts())
    ```

<br>

2. 查詢是否通過 API 測試。

    ```python
    import shioaji as sj
    from dotenv import load_dotenv
    import os

    # 載入 .env 檔案
    load_dotenv()

    # 讀取環境變數
    API_KEY = os.getenv("API_KEY")
    SECRET_KEY = os.getenv("SECRET_KEY")

    if not API_KEY or not SECRET_KEY:
        raise ValueError("找不到密鑰資料。")

    # 初始化 Shioaji API
    # 正式模式，也就是非模擬模式
    api = sj.Shioaji(simulation=False)
    accounts = api.login(
        api_key=API_KEY, 
        secret_key=SECRET_KEY
    )

    print(accounts)
    ```

    _結果顯示_

    ```bash
    Response Code: 0 | 
    Event Code: 0 | 
    Info: host '210.59.255.161:80', 
    hostname '210.59.255.161:80' 
    IP 210.59.255.161:80 
    (host 1 of 1) 
    (host connection attempt 1 of 1) 
    (total connection attempt 1 of 1) | 
    Event: Session up
    [
        StockAccount(
            person_id='Y120269041', 
            broker_id='9A95', 
            account_id='3453495', 
            username='蕭中柱'
        )
    ]
    ```

<br>

3. 檢查是否有完成簽署的帳號。

    ```python
    signed_accounts = [
        account 
        for account in accounts 
        if getattr(account, 'signed', False)
    ]

    if signed_accounts:
        print("已完成簽署的帳號:")
        for account in signed_accounts:
            print(account)
    else:
        print("沒有完成簽署的帳號，請前往重新簽署。")
    ```

    ![](images/img_17.png)

<br>

___

_END_