# Short Stock Source

_融券餘額，也就是市場中仍可供借券放空的數量_

<br>

## 彙整與補充

1. `api.short_stock_sources()` 提供在下單前檢視所選股票是否有足夠餘額可放空；`回傳` 為一個 `ShortStockSource` 物件的列表，內容包含 `code (str)`股票代碼、`short_stock_source (float)` 可用的融券券源數量、`ts (int)` 取得該資料的時間戳記。

    ```python
    api.short_stock_sources(
        # 欲查詢的股票合約列表
        contracts: List[shioaji.contracts.Stock],
        # 請求逾時時間（毫秒）
        timeout: int = 5000,
        # callback 函式，可在取得結果時進行回呼
        cb: Callable[[shioaji.data.ShortStockSource], NoneType] = None
    ) -> List[shioaji.data.ShortStockSource]
    ```

<br>

2. 實作。

    ```python
    contracts = [
        api.Contracts.Stocks['2330'],
        api.Contracts.Stocks['2317']
    ]
    short_stock_sources = api.short_stock_sources(contracts)
    ```

    _輸出_

  ```bash
  [
      ShortStockSource(code='2330', short_stock_source=58260, ts=1673943433000000000),
      ShortStockSource(code='2317', short_stock_source=75049, ts=1673943433000000000)
  ]
  ```

<br>

3. 轉為 DataFrame。

    ```python
    import pandas as pd

    df = pd.DataFrame(s.__dict__ for s in short_stock_sources)
    df.ts = pd.to_datetime(df.ts)
    df
    ```

    _輸出_

    ```bash
    # 後補
    ```

<br>

___

_END_